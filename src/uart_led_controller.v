/* Generated by Amaranth Yosys 0.25 (PyPI ver 0.25.0.0.post75, git sha1 e02b7f64b) */

(* \amaranth.hierarchy  = "top.soc.led4.peri_bridge.csr_bridge_0" *)
(* generator = "Amaranth" *)
module csr_bridge_0(clk, csr__addr, csr__r_stb, csr__r_data, csr__w_stb, csr__w_data, wb__adr, wb__cyc, wb__stb, wb__sel, wb__we, wb__dat_w, wb__dat_r, wb__ack, rst);
  reg \$auto$verilog_backend.cc:2083:dump_module$1  = 0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
  wire \$1 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:83" *)
  wire \$11 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
  wire \$13 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
  wire \$15 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
  wire \$17 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:81" *)
  wire \$3 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:81" *)
  wire \$5 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
  wire \$7 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
  wire \$9 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input clk;
  wire clk;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  output csr__addr;
  wire csr__addr;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  input [31:0] csr__r_data;
  wire [31:0] csr__r_data;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  output csr__r_stb;
  reg csr__r_stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  output [31:0] csr__w_data;
  reg [31:0] csr__w_data;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  output csr__w_stb;
  reg csr__w_stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:68" *)
  reg cycle = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:68" *)
  reg \cycle$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input rst;
  wire rst;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  output wb__ack;
  reg wb__ack = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  reg \wb__ack$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  input wb__adr;
  wire wb__adr;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  input wb__cyc;
  wire wb__cyc;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  output [31:0] wb__dat_r;
  reg [31:0] wb__dat_r = 32'd0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  reg [31:0] \wb__dat_r$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  input [31:0] wb__dat_w;
  wire [31:0] wb__dat_w;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  input wb__sel;
  wire wb__sel;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  input wb__stb;
  wire wb__stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  input wb__we;
  wire wb__we;
  assign \$9  = wb__cyc & (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *) wb__stb;
  assign \$11  = wb__sel & (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:83" *) wb__we;
  assign \$13  = wb__cyc & (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *) wb__stb;
  assign \$15  = wb__cyc & (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *) wb__stb;
  assign \$17  = wb__cyc & (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *) wb__stb;
  always @(posedge clk)
    cycle <= \cycle$next ;
  assign \$1  = wb__cyc & (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *) wb__stb;
  always @(posedge clk)
    wb__dat_r <= \wb__dat_r$next ;
  always @(posedge clk)
    wb__ack <= \wb__ack$next ;
  assign \$3  = ~ (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:81" *) wb__we;
  assign \$5  = wb__sel & (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:81" *) \$3 ;
  assign \$7  = wb__cyc & (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *) wb__stb;
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$1 ) begin end
    csr__r_stb = 1'h0;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
    casez (\$1 )
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" */
      1'h1:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:72" *)
          casez (cycle)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:77" */
            1'h0:
                csr__r_stb = \$5 ;
          endcase
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$1 ) begin end
    csr__w_data = 32'd0;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
    casez (\$7 )
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" */
      1'h1:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:72" *)
          casez (cycle)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:77" */
            1'h0:
                csr__w_data = wb__dat_w;
          endcase
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$1 ) begin end
    csr__w_stb = 1'h0;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
    casez (\$9 )
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" */
      1'h1:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:72" *)
          casez (cycle)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:77" */
            1'h0:
                csr__w_stb = \$11 ;
          endcase
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$1 ) begin end
    \cycle$next  = cycle;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
    casez (\$13 )
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" */
      1'h1:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:72" *)
          casez (cycle)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:77" */
            1'h0:
                \cycle$next  = 1'h1;
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:90" *)
    casez (wb__ack)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:90" */
      1'h1:
          \cycle$next  = 1'h0;
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \cycle$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$1 ) begin end
    \wb__dat_r$next  = wb__dat_r;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
    casez (\$15 )
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" */
      1'h1:
          (* full_case = 32'd1 *)
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:72" *)
          casez (cycle)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:77" */
            1'h0:
                /* empty */;
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:86" */
            default:
                \wb__dat_r$next  = csr__r_data;
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \wb__dat_r$next  = 32'd0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$1 ) begin end
    \wb__ack$next  = wb__ack;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" *)
    casez (\$17 )
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:71" */
      1'h1:
          (* full_case = 32'd1 *)
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:72" *)
          casez (cycle)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:77" */
            1'h0:
                /* empty */;
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:86" */
            default:
                \wb__ack$next  = 1'h1;
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:90" *)
    casez (wb__ack)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:90" */
      1'h1:
          \wb__ack$next  = 1'h0;
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \wb__ack$next  = 1'h0;
    endcase
  end
  assign csr__addr = wb__adr;
endmodule

(* \amaranth.hierarchy  = "top.soc.led4.peri_bridge.csr_mux_0" *)
(* generator = "Amaranth" *)
module csr_mux_0(clk, led_status__w_stb, led_status__r_data, led_status__w_data, csr__addr, csr__r_stb, csr__r_data, csr__w_stb, csr__w_data, rst);
  reg \$auto$verilog_backend.cc:2083:dump_module$2  = 0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:478" *)
  wire \$1 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:479" *)
  wire [31:0] \$3 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:479" *)
  wire [31:0] \$5 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:485" *)
  wire [31:0] \$7 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:485" *)
  wire [31:0] \$9 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input clk;
  wire clk;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  input csr__addr;
  wire csr__addr;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  output [31:0] csr__r_data;
  wire [31:0] csr__r_data;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  input csr__r_stb;
  wire csr__r_stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  input [31:0] csr__w_data;
  wire [31:0] csr__w_data;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  input csr__w_stb;
  wire csr__w_stb;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  input [31:0] led_status__r_data;
  wire [31:0] led_status__r_data;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  reg led_status__r_stb;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  output [31:0] led_status__w_data;
  wire [31:0] led_status__w_data;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  output led_status__w_stb;
  reg led_status__w_stb = 1'h0;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  reg \led_status__w_stb$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:180" *)
  reg [31:0] r_shadow__0__data = 32'd0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:180" *)
  reg [31:0] \r_shadow__0__data$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:181" *)
  reg r_shadow__0__r_en = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:181" *)
  reg \r_shadow__0__r_en$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:182" *)
  wire r_shadow__0__w_en;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input rst;
  wire rst;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:180" *)
  reg [31:0] w_shadow__0__data = 32'd0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:180" *)
  reg [31:0] \w_shadow__0__data$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:182" *)
  reg w_shadow__0__w_en;
  assign \$9  = 1'h0 | (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:485" *) \$7 ;
  always @(posedge clk)
    r_shadow__0__r_en <= \r_shadow__0__r_en$next ;
  always @(posedge clk)
    r_shadow__0__data <= \r_shadow__0__data$next ;
  always @(posedge clk)
    led_status__w_stb <= \led_status__w_stb$next ;
  always @(posedge clk)
    w_shadow__0__data <= \w_shadow__0__data$next ;
  assign \$3  = led_status__r_stb ? (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:479" *) led_status__r_data : 32'd0;
  assign \$5  = 1'h0 | (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:479" *) \$3 ;
  assign \$7  = r_shadow__0__r_en ? (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:485" *) r_shadow__0__data : 32'd0;
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \r_shadow__0__r_en$next  = 1'h0;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:465" *)
    casez (csr__addr)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:472" */
      1'h0:
          \r_shadow__0__r_en$next  = csr__r_stb;
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \r_shadow__0__r_en$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    led_status__r_stb = 1'h0;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:465" *)
    casez (csr__addr)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:472" */
      1'h0:
          led_status__r_stb = csr__r_stb;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \r_shadow__0__data$next  = r_shadow__0__data;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:482" *)
    casez (r_shadow__0__w_en)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:482" */
      1'h1:
          \r_shadow__0__data$next  = \$5 ;
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \r_shadow__0__data$next  = 32'd0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \led_status__w_stb$next  = 1'h0;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:490" *)
    casez (csr__addr)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:500" */
      1'h0:
          \led_status__w_stb$next  = csr__w_stb;
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \led_status__w_stb$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    w_shadow__0__w_en = 1'h0;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:490" *)
    casez (csr__addr)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:500" */
      1'h0:
          w_shadow__0__w_en = csr__w_stb;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \w_shadow__0__data$next  = w_shadow__0__data;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:509" *)
    casez (w_shadow__0__w_en)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:509" */
      1'h1:
          \w_shadow__0__data$next  = csr__w_data;
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \w_shadow__0__data$next  = 32'd0;
    endcase
  end
  assign led_status__w_data = w_shadow__0__data;
  assign csr__r_data = \$9 ;
  assign r_shadow__0__w_en = \$1 ;
  assign \$1  = led_status__r_stb;
endmodule

(* \amaranth.hierarchy  = "top.soc.decoder" *)
(* generator = "Amaranth" *)
module decoder(_bus__dat_w, _bus__dat_r, _bus__sel, _bus__cyc, _bus__stb, _bus__we, _bus__ack, \_bus__adr$1 , \_bus__dat_w$2 , \_bus__sel$3 , \_bus__we$4 , \_bus__stb$5 , \_bus__cyc$6 , \_bus__dat_r$7 , \_bus__ack$8 , _bus__adr);
  reg \$auto$verilog_backend.cc:2083:dump_module$3  = 0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:285" *)
  wire [32:0] \$10 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:304" *)
  wire \$12 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:285" *)
  wire [32:0] \$9 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output _bus__ack;
  wire _bus__ack;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input \_bus__ack$8 ;
  wire \_bus__ack$8 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input [31:0] _bus__adr;
  wire [31:0] _bus__adr;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output \_bus__adr$1 ;
  wire \_bus__adr$1 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__cyc;
  wire _bus__cyc;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output \_bus__cyc$6 ;
  reg \_bus__cyc$6 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output [31:0] _bus__dat_r;
  reg [31:0] _bus__dat_r;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input [31:0] \_bus__dat_r$7 ;
  wire [31:0] \_bus__dat_r$7 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input [31:0] _bus__dat_w;
  wire [31:0] _bus__dat_w;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output [31:0] \_bus__dat_w$2 ;
  wire [31:0] \_bus__dat_w$2 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__sel;
  wire _bus__sel;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output \_bus__sel$3 ;
  wire \_bus__sel$3 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__stb;
  wire _bus__stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output \_bus__stb$5 ;
  wire \_bus__stb$5 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__we;
  wire _bus__we;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output \_bus__we$4 ;
  wire \_bus__we$4 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \_bus__cyc$6  = 1'h0;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:280" *)
    casez (_bus__adr)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:299" */
      32'b0000000000000000000000000000101?:
          \_bus__cyc$6  = _bus__cyc;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    _bus__dat_r = 32'd0;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:280" *)
    casez (_bus__adr)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:299" */
      32'b0000000000000000000000000000101?:
          _bus__dat_r = \_bus__dat_r$7 ;
    endcase
  end
  assign \$9  = \$10 ;
  assign _bus__ack = \$12 ;
  assign \_bus__stb$5  = _bus__stb;
  assign \_bus__we$4  = _bus__we;
  assign \_bus__sel$3  = _bus__sel;
  assign \_bus__dat_w$2  = _bus__dat_w;
  assign \_bus__adr$1  = \$10 [0];
  assign \$10  = { 1'h0, _bus__adr };
  assign \$12  = \_bus__ack$8 ;
endmodule

(* \amaranth.hierarchy  = "top.soc.led4" *)
(* generator = "Amaranth" *)
module led4(rst, clk, _bus__adr, _bus__dat_w, _bus__sel, _bus__we, _bus__stb, _bus__cyc, _bus__dat_r, _bus__ack, led);
  reg \$auto$verilog_backend.cc:2083:dump_module$4  = 0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output _bus__ack;
  wire _bus__ack;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__adr;
  wire _bus__adr;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__cyc;
  wire _bus__cyc;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output [31:0] _bus__dat_r;
  wire [31:0] _bus__dat_r;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input [31:0] _bus__dat_w;
  wire [31:0] _bus__dat_w;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__sel;
  wire _bus__sel;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__stb;
  wire _bus__stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__we;
  wire _bus__we;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input clk;
  wire clk;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/led.py:20" *)
  output [31:0] led;
  wire [31:0] led;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  reg [31:0] peri_bridge_led_status__r_data = 32'd0;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  reg [31:0] \peri_bridge_led_status__r_data$next ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  wire [31:0] peri_bridge_led_status__w_data;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  wire peri_bridge_led_status__w_stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input rst;
  wire rst;
  always @(posedge clk)
    peri_bridge_led_status__r_data <= \peri_bridge_led_status__r_data$next ;
  peri_bridge peri_bridge (
    ._bus__ack(_bus__ack),
    ._bus__adr(_bus__adr),
    ._bus__cyc(_bus__cyc),
    ._bus__dat_r(_bus__dat_r),
    ._bus__dat_w(_bus__dat_w),
    ._bus__sel(_bus__sel),
    ._bus__stb(_bus__stb),
    ._bus__we(_bus__we),
    .clk(clk),
    .led_status__r_data(peri_bridge_led_status__r_data),
    .led_status__w_data(peri_bridge_led_status__w_data),
    .led_status__w_stb(peri_bridge_led_status__w_stb),
    .rst(rst)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \peri_bridge_led_status__r_data$next  = peri_bridge_led_status__r_data;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/led.py:26" *)
    casez (peri_bridge_led_status__w_stb)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/led.py:26" */
      1'h1:
          \peri_bridge_led_status__r_data$next  = peri_bridge_led_status__w_data;
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \peri_bridge_led_status__r_data$next  = 32'd0;
    endcase
  end
  assign led = peri_bridge_led_status__w_data;
endmodule

(* \amaranth.hierarchy  = "top.soc.led4.peri_bridge" *)
(* generator = "Amaranth" *)
module peri_bridge(clk, _bus__adr, _bus__dat_w, _bus__sel, _bus__we, _bus__stb, _bus__cyc, _bus__dat_r, _bus__ack, led_status__w_stb, led_status__r_data, led_status__w_data, rst);
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output _bus__ack;
  wire _bus__ack;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__adr;
  wire _bus__adr;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__cyc;
  wire _bus__cyc;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output [31:0] _bus__dat_r;
  wire [31:0] _bus__dat_r;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input [31:0] _bus__dat_w;
  wire [31:0] _bus__dat_w;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__sel;
  wire _bus__sel;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__stb;
  wire _bus__stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__we;
  wire _bus__we;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input clk;
  wire clk;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  wire csr_bridge_0_wb__ack;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  wire csr_bridge_0_wb__adr;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  wire csr_bridge_0_wb__cyc;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  wire [31:0] csr_bridge_0_wb__dat_r;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  wire [31:0] csr_bridge_0_wb__dat_w;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  wire csr_bridge_0_wb__sel;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  wire csr_bridge_0_wb__stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  wire csr_bridge_0_wb__we;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  wire csr_mux_0_csr__addr;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  wire [31:0] csr_mux_0_csr__r_data;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  wire csr_mux_0_csr__r_stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  wire [31:0] csr_mux_0_csr__w_data;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/bus.py:412" *)
  wire csr_mux_0_csr__w_stb;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  input [31:0] led_status__r_data;
  wire [31:0] led_status__r_data;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  output [31:0] led_status__w_data;
  wire [31:0] led_status__w_data;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/peripheral.py:263" *)
  output led_status__w_stb;
  wire led_status__w_stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input rst;
  wire rst;
  csr_bridge_0 csr_bridge_0 (
    .clk(clk),
    .csr__addr(csr_mux_0_csr__addr),
    .csr__r_data(csr_mux_0_csr__r_data),
    .csr__r_stb(csr_mux_0_csr__r_stb),
    .csr__w_data(csr_mux_0_csr__w_data),
    .csr__w_stb(csr_mux_0_csr__w_stb),
    .rst(rst),
    .wb__ack(csr_bridge_0_wb__ack),
    .wb__adr(csr_bridge_0_wb__adr),
    .wb__cyc(csr_bridge_0_wb__cyc),
    .wb__dat_r(csr_bridge_0_wb__dat_r),
    .wb__dat_w(csr_bridge_0_wb__dat_w),
    .wb__sel(csr_bridge_0_wb__sel),
    .wb__stb(csr_bridge_0_wb__stb),
    .wb__we(csr_bridge_0_wb__we)
  );
  csr_mux_0 csr_mux_0 (
    .clk(clk),
    .csr__addr(csr_mux_0_csr__addr),
    .csr__r_data(csr_mux_0_csr__r_data),
    .csr__r_stb(csr_mux_0_csr__r_stb),
    .csr__w_data(csr_mux_0_csr__w_data),
    .csr__w_stb(csr_mux_0_csr__w_stb),
    .led_status__r_data(led_status__r_data),
    .led_status__w_data(led_status__w_data),
    .led_status__w_stb(led_status__w_stb),
    .rst(rst)
  );
  wb_decoder wb_decoder (
    ._bus__ack(_bus__ack),
    ._bus__adr(_bus__adr),
    ._bus__cyc(_bus__cyc),
    ._bus__dat_r(_bus__dat_r),
    ._bus__dat_w(_bus__dat_w),
    ._bus__sel(_bus__sel),
    ._bus__stb(_bus__stb),
    ._bus__we(_bus__we),
    .wb__ack(csr_bridge_0_wb__ack),
    .wb__adr(csr_bridge_0_wb__adr),
    .wb__cyc(csr_bridge_0_wb__cyc),
    .wb__dat_r(csr_bridge_0_wb__dat_r),
    .wb__dat_w(csr_bridge_0_wb__dat_w),
    .wb__sel(csr_bridge_0_wb__sel),
    .wb__stb(csr_bridge_0_wb__stb),
    .wb__we(csr_bridge_0_wb__we)
  );
endmodule

(* \amaranth.hierarchy  = "top.soc.uart_WB_bridge.serial.rx" *)
(* generator = "Amaranth" *)
module rx(rdy, data, rst, clk, divisor, i, ack);
  reg \$auto$verilog_backend.cc:2083:dump_module$5  = 0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" *)
  wire \$1 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:117" *)
  wire [8:0] \$10 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *)
  wire \$12 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:123" *)
  wire [9:0] \$14 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:123" *)
  wire [9:0] \$15 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:128" *)
  wire [9:0] \$17 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:128" *)
  wire [9:0] \$18 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" *)
  wire \$20 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *)
  wire \$22 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:130" *)
  wire \$24 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *)
  wire \$26 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:137" *)
  wire \$28 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:137" *)
  wire \$29 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *)
  wire \$3 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:137" *)
  wire \$31 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:137" *)
  wire \$33 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:138" *)
  wire \$36 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:138" *)
  wire \$37 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:141" *)
  wire \$40 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:145" *)
  wire \$42 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:127" *)
  wire [4:0] \$5 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:127" *)
  wire [4:0] \$6 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" *)
  wire \$8 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:96" *)
  input ack;
  wire ack;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:107" *)
  reg [3:0] bitno = 4'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:107" *)
  reg [3:0] \bitno$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input clk;
  wire clk;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:89" *)
  output [7:0] data;
  reg [7:0] data = 8'h00;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:89" *)
  reg [7:0] \data$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:87" *)
  input [8:0] divisor;
  wire [8:0] divisor;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:90" *)
  reg err__frame = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:90" *)
  reg \err__frame$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:90" *)
  reg err__overflow = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:90" *)
  reg \err__overflow$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:90" *)
  reg err__parity = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:90" *)
  reg \err__parity$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:112" *)
  reg [1:0] fsm_state = 2'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:112" *)
  reg [1:0] \fsm_state$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:98" *)
  input i;
  wire i;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:95" *)
  output rdy;
  reg rdy = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:95" *)
  reg \rdy$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input rst;
  wire rst;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:106" *)
  reg [7:0] shreg__data = 8'h00;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:106" *)
  reg [7:0] \shreg__data$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:106" *)
  reg shreg__start = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:106" *)
  reg \shreg__start$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:106" *)
  reg shreg__stop = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:106" *)
  reg \shreg__stop$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:105" *)
  reg [8:0] timer = 9'h1b2;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:105" *)
  reg [8:0] \timer$next ;
  assign \$12  = | (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *) timer;
  assign \$15  = timer - (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:123" *) 1'h1;
  assign \$18  = divisor - (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:128" *) 1'h1;
  assign \$1  = ~ (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" *) i;
  assign \$20  = ~ (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" *) i;
  assign \$22  = | (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *) timer;
  assign \$24  = ! (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:130" *) bitno;
  assign \$26  = | (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *) timer;
  assign \$29  = ~ (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:137" *) shreg__start;
  assign \$33  = \$29  & (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:137" *) \$31 ;
  assign \$28  = ~ (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:137" *) \$33 ;
  assign \$3  = | (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *) timer;
  assign \$40  = ~ (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:141" *) ack;
  assign \$42  = fsm_state == (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:145" *) 2'h2;
  always @(posedge clk)
    bitno <= \bitno$next ;
  always @(posedge clk)
    timer <= \timer$next ;
  always @(posedge clk)
    fsm_state <= \fsm_state$next ;
  always @(posedge clk)
    shreg__start <= \shreg__start$next ;
  always @(posedge clk)
    shreg__data <= \shreg__data$next ;
  always @(posedge clk)
    shreg__stop <= \shreg__stop$next ;
  always @(posedge clk)
    data <= \data$next ;
  always @(posedge clk)
    err__frame <= \err__frame$next ;
  always @(posedge clk)
    err__parity <= \err__parity$next ;
  always @(posedge clk)
    err__overflow <= \err__overflow$next ;
  always @(posedge clk)
    rdy <= \rdy$next ;
  assign \$6  = bitno - (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:127" *) 1'h1;
  assign \$8  = ~ (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" *) i;
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$5 ) begin end
    \bitno$next  = bitno;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:112" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:113" */
      /* \amaranth.decoding  = "IDLE/0" */
      2'h0:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" *)
          casez (\$1 )
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" */
            1'h1:
                \bitno$next  = 4'h9;
          endcase
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:121" */
      /* \amaranth.decoding  = "BUSY/1" */
      2'h1:
          (* full_case = 32'd1 *)
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *)
          casez (\$3 )
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" */
            1'h1:
                /* empty */;
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:124" */
            default:
                \bitno$next  = \$6 [3:0];
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \bitno$next  = 4'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$5 ) begin end
    \timer$next  = timer;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:112" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:113" */
      /* \amaranth.decoding  = "IDLE/0" */
      2'h0:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" *)
          casez (\$8 )
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" */
            1'h1:
                \timer$next  = \$10 ;
          endcase
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:121" */
      /* \amaranth.decoding  = "BUSY/1" */
      2'h1:
          (* full_case = 32'd1 *)
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *)
          casez (\$12 )
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" */
            1'h1:
                \timer$next  = \$15 [8:0];
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:124" */
            default:
                \timer$next  = \$18 [8:0];
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \timer$next  = 9'h1b2;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$5 ) begin end
    \err__overflow$next  = err__overflow;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:112" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:113" */
      /* \amaranth.decoding  = "IDLE/0" */
      2'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:121" */
      /* \amaranth.decoding  = "BUSY/1" */
      2'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:133" */
      /* \amaranth.decoding  = "DONE/2" */
      2'h2:
          \err__overflow$next  = \$40 ;
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \err__overflow$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$5 ) begin end
    \rdy$next  = rdy;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:144" *)
    casez (ack)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:144" */
      1'h1:
          \rdy$next  = \$42 ;
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \rdy$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$5 ) begin end
    \fsm_state$next  = fsm_state;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:112" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:113" */
      /* \amaranth.decoding  = "IDLE/0" */
      2'h0:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" *)
          casez (\$20 )
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:114" */
            1'h1:
                \fsm_state$next  = 2'h1;
          endcase
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:121" */
      /* \amaranth.decoding  = "BUSY/1" */
      2'h1:
          (* full_case = 32'd1 *)
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *)
          casez (\$22 )
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" */
            1'h1:
                /* empty */;
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:124" */
            default:
                (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:130" *)
                casez (\$24 )
                  /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:130" */
                  1'h1:
                      \fsm_state$next  = 2'h2;
                endcase
          endcase
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:133" */
      /* \amaranth.decoding  = "DONE/2" */
      2'h2:
          \fsm_state$next  = 2'h0;
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \fsm_state$next  = 2'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$5 ) begin end
    \shreg__start$next  = shreg__start;
    \shreg__data$next  = shreg__data;
    \shreg__stop$next  = shreg__stop;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:112" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:113" */
      /* \amaranth.decoding  = "IDLE/0" */
      2'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:121" */
      /* \amaranth.decoding  = "BUSY/1" */
      2'h1:
          (* full_case = 32'd1 *)
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" *)
          casez (\$26 )
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:122" */
            1'h1:
                /* empty */;
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:124" */
            default:
                { \shreg__stop$next , \shreg__data$next , \shreg__start$next  } = { i, shreg__stop, shreg__data };
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
        begin
          \shreg__start$next  = 1'h0;
          \shreg__data$next  = 8'h00;
          \shreg__stop$next  = 1'h0;
        end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$5 ) begin end
    \data$next  = data;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:112" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:113" */
      /* \amaranth.decoding  = "IDLE/0" */
      2'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:121" */
      /* \amaranth.decoding  = "BUSY/1" */
      2'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:133" */
      /* \amaranth.decoding  = "DONE/2" */
      2'h2:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:134" *)
          casez (ack)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:134" */
            1'h1:
                \data$next  = shreg__data;
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \data$next  = 8'h00;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$5 ) begin end
    \err__frame$next  = err__frame;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:112" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:113" */
      /* \amaranth.decoding  = "IDLE/0" */
      2'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:121" */
      /* \amaranth.decoding  = "BUSY/1" */
      2'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:133" */
      /* \amaranth.decoding  = "DONE/2" */
      2'h2:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:134" *)
          casez (ack)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:134" */
            1'h1:
                \err__frame$next  = \$28 ;
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \err__frame$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$5 ) begin end
    \err__parity$next  = err__parity;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:112" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:113" */
      /* \amaranth.decoding  = "IDLE/0" */
      2'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:121" */
      /* \amaranth.decoding  = "BUSY/1" */
      2'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:133" */
      /* \amaranth.decoding  = "DONE/2" */
      2'h2:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:134" *)
          casez (ack)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:134" */
            1'h1:
                \err__parity$next  = \$36 ;
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \err__parity$next  = 1'h0;
    endcase
  end
  assign \$5  = \$6 ;
  assign \$14  = \$15 ;
  assign \$17  = \$18 ;
  assign \$10  = { 1'h0, divisor[8:1] };
  assign \$31  = shreg__stop;
  assign \$37  = 1'h1;
  assign \$36  = 1'h0;
endmodule

(* \amaranth.hierarchy  = "top.soc.uart_WB_bridge.serial" *)
(* generator = "Amaranth" *)
module serial(rdy, data, \ack$1 , \data$2 , \rdy$3 , rst, clk, i, o, ack);
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:96" *)
  input ack;
  wire ack;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:188" *)
  input \ack$1 ;
  wire \ack$1 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input clk;
  wire clk;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:89" *)
  output [7:0] data;
  wire [7:0] data;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:186" *)
  input [7:0] \data$2 ;
  wire [7:0] \data$2 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:259" *)
  wire [8:0] divisor;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:98" *)
  input i;
  wire i;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:190" *)
  output o;
  wire o;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:95" *)
  output rdy;
  wire rdy;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:187" *)
  output \rdy$3 ;
  wire \rdy$3 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input rst;
  wire rst;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:87" *)
  wire [8:0] rx_divisor;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:184" *)
  wire [8:0] tx_divisor;
  rx rx (
    .ack(ack),
    .clk(clk),
    .data(data),
    .divisor(9'h1b2),
    .i(i),
    .rdy(rdy),
    .rst(rst)
  );
  tx tx (
    .ack(\ack$1 ),
    .clk(clk),
    .data(\data$2 ),
    .divisor(9'h1b2),
    .o(o),
    .rdy(\rdy$3 ),
    .rst(rst)
  );
  assign divisor = 9'h1b2;
  assign tx_divisor = 9'h1b2;
  assign rx_divisor = 9'h1b2;
endmodule

(* \amaranth.hierarchy  = "top.soc" *)
(* generator = "Amaranth" *)
module soc(rst, clk, i, o, led);
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input clk;
  wire clk;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire decoder__bus__ack;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire \decoder__bus__ack$8 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire [31:0] decoder__bus__adr;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire \decoder__bus__adr$1 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire decoder__bus__cyc;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire \decoder__bus__cyc$6 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire [31:0] decoder__bus__dat_r;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire [31:0] \decoder__bus__dat_r$7 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire [31:0] decoder__bus__dat_w;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire [31:0] \decoder__bus__dat_w$2 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire decoder__bus__sel;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire \decoder__bus__sel$3 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire decoder__bus__stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire \decoder__bus__stb$5 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire decoder__bus__we;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  wire \decoder__bus__we$4 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:98" *)
  input i;
  wire i;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/led.py:20" *)
  output [31:0] led;
  wire [31:0] led;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:190" *)
  output o;
  wire o;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input rst;
  wire rst;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  wire uart_WB_bridge_bus__ack;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  wire [31:0] uart_WB_bridge_bus__adr;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  wire uart_WB_bridge_bus__cyc;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  wire [31:0] uart_WB_bridge_bus__dat_r;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  wire [31:0] uart_WB_bridge_bus__dat_w;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  wire [3:0] uart_WB_bridge_bus__sel;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  wire uart_WB_bridge_bus__stb;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  wire uart_WB_bridge_bus__we;
  decoder decoder (
    ._bus__ack(decoder__bus__ack),
    .\_bus__ack$8 (\decoder__bus__ack$8 ),
    ._bus__adr(decoder__bus__adr),
    .\_bus__adr$1 (\decoder__bus__adr$1 ),
    ._bus__cyc(decoder__bus__cyc),
    .\_bus__cyc$6 (\decoder__bus__cyc$6 ),
    ._bus__dat_r(decoder__bus__dat_r),
    .\_bus__dat_r$7 (\decoder__bus__dat_r$7 ),
    ._bus__dat_w(decoder__bus__dat_w),
    .\_bus__dat_w$2 (\decoder__bus__dat_w$2 ),
    ._bus__sel(decoder__bus__sel),
    .\_bus__sel$3 (\decoder__bus__sel$3 ),
    ._bus__stb(decoder__bus__stb),
    .\_bus__stb$5 (\decoder__bus__stb$5 ),
    ._bus__we(decoder__bus__we),
    .\_bus__we$4 (\decoder__bus__we$4 )
  );
  led4 led4 (
    ._bus__ack(\decoder__bus__ack$8 ),
    ._bus__adr(\decoder__bus__adr$1 ),
    ._bus__cyc(\decoder__bus__cyc$6 ),
    ._bus__dat_r(\decoder__bus__dat_r$7 ),
    ._bus__dat_w(\decoder__bus__dat_w$2 ),
    ._bus__sel(\decoder__bus__sel$3 ),
    ._bus__stb(\decoder__bus__stb$5 ),
    ._bus__we(\decoder__bus__we$4 ),
    .clk(clk),
    .led(led),
    .rst(rst)
  );
  uart_WB_bridge uart_WB_bridge (
    .bus__ack(uart_WB_bridge_bus__ack),
    .bus__adr(uart_WB_bridge_bus__adr),
    .bus__cyc(uart_WB_bridge_bus__cyc),
    .bus__dat_r(uart_WB_bridge_bus__dat_r),
    .bus__dat_w(uart_WB_bridge_bus__dat_w),
    .bus__sel(uart_WB_bridge_bus__sel),
    .bus__stb(uart_WB_bridge_bus__stb),
    .bus__we(uart_WB_bridge_bus__we),
    .clk(clk),
    .i(i),
    .o(o),
    .rst(rst)
  );
  assign uart_WB_bridge_bus__ack = decoder__bus__ack;
  assign decoder__bus__we = uart_WB_bridge_bus__we;
  assign decoder__bus__stb = uart_WB_bridge_bus__stb;
  assign decoder__bus__cyc = uart_WB_bridge_bus__cyc;
  assign decoder__bus__sel = uart_WB_bridge_bus__sel[0];
  assign uart_WB_bridge_bus__dat_r = decoder__bus__dat_r;
  assign decoder__bus__dat_w = uart_WB_bridge_bus__dat_w;
  assign decoder__bus__adr = uart_WB_bridge_bus__adr;
endmodule

(* \amaranth.hierarchy  = "top" *)
(* top =  1  *)
(* generator = "Amaranth" *)
module top(i, o, clk, rst, led_port);
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input clk;
  wire clk;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:98" *)
  input i;
  wire i;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/main.py:17" *)
  output [6:0] led_port;
  wire [6:0] led_port;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:190" *)
  output o;
  wire o;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input rst;
  wire rst;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/led.py:20" *)
  wire [31:0] soc_led;
  soc soc (
    .clk(clk),
    .i(i),
    .led(soc_led),
    .o(o),
    .rst(rst)
  );
  assign led_port = soc_led[6:0];
endmodule

(* \amaranth.hierarchy  = "top.soc.uart_WB_bridge.serial.tx" *)
(* generator = "Amaranth" *)
module tx(data, rdy, rst, clk, divisor, o, ack);
  reg \$auto$verilog_backend.cc:2083:dump_module$6  = 0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *)
  wire \$1 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:214" *)
  wire [9:0] \$10 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:214" *)
  wire [9:0] \$11 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *)
  wire \$13 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:220" *)
  wire [9:0] \$15 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:220" *)
  wire [9:0] \$16 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:225" *)
  wire [9:0] \$18 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:225" *)
  wire [9:0] \$19 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *)
  wire \$21 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:227" *)
  wire \$23 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/rec.py:178" *)
  wire [10:0] \$3 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *)
  wire \$5 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:224" *)
  wire [4:0] \$7 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:224" *)
  wire [4:0] \$8 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:188" *)
  input ack;
  wire ack;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:199" *)
  reg [3:0] bitno = 4'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:199" *)
  reg [3:0] \bitno$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input clk;
  wire clk;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:186" *)
  input [7:0] data;
  wire [7:0] data;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:184" *)
  input [8:0] divisor;
  wire [8:0] divisor;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:204" *)
  reg fsm_state = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:204" *)
  reg \fsm_state$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:190" *)
  output o;
  reg o = 1'h1;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:190" *)
  reg \o$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:187" *)
  output rdy;
  reg rdy;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input rst;
  wire rst;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:198" *)
  reg [7:0] shreg__data = 8'h00;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:198" *)
  reg [7:0] \shreg__data$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:198" *)
  reg shreg__start = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:198" *)
  reg \shreg__start$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:198" *)
  reg shreg__stop = 1'h0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:198" *)
  reg \shreg__stop$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:197" *)
  reg [8:0] timer = 9'h1b2;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:197" *)
  reg [8:0] \timer$next ;
  assign \$11  = divisor - (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:214" *) 1'h1;
  assign \$13  = | (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *) timer;
  assign \$16  = timer - (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:220" *) 1'h1;
  assign \$1  = | (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *) timer;
  assign \$19  = divisor - (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:225" *) 1'h1;
  assign \$21  = | (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *) timer;
  assign \$23  = ! (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:227" *) bitno;
  always @(posedge clk)
    shreg__start <= \shreg__start$next ;
  always @(posedge clk)
    shreg__data <= \shreg__data$next ;
  always @(posedge clk)
    shreg__stop <= \shreg__stop$next ;
  always @(posedge clk)
    bitno <= \bitno$next ;
  always @(posedge clk)
    timer <= \timer$next ;
  always @(posedge clk)
    fsm_state <= \fsm_state$next ;
  always @(posedge clk)
    o <= \o$next ;
  assign \$3  = + (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/rec.py:178" *) { shreg__stop, shreg__data, shreg__start };
  assign \$5  = | (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *) timer;
  assign \$8  = bitno - (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:224" *) 1'h1;
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$6 ) begin end
    rdy = 1'h0;
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:204" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:205" */
      /* \amaranth.decoding  = "IDLE/0" */
      1'h0:
          rdy = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$6 ) begin end
    \bitno$next  = bitno;
    (* full_case = 32'd1 *)
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:204" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:205" */
      /* \amaranth.decoding  = "IDLE/0" */
      1'h0:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:207" *)
          casez (ack)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:207" */
            1'h1:
                \bitno$next  = 4'h9;
          endcase
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:218" */
      /* \amaranth.decoding  = "BUSY/1" */
      1'h1:
          (* full_case = 32'd1 *)
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *)
          casez (\$5 )
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" */
            1'h1:
                /* empty */;
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:221" */
            default:
                \bitno$next  = \$8 [3:0];
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \bitno$next  = 4'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$6 ) begin end
    \timer$next  = timer;
    (* full_case = 32'd1 *)
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:204" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:205" */
      /* \amaranth.decoding  = "IDLE/0" */
      1'h0:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:207" *)
          casez (ack)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:207" */
            1'h1:
                \timer$next  = \$11 [8:0];
          endcase
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:218" */
      /* \amaranth.decoding  = "BUSY/1" */
      1'h1:
          (* full_case = 32'd1 *)
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *)
          casez (\$13 )
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" */
            1'h1:
                \timer$next  = \$16 [8:0];
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:221" */
            default:
                \timer$next  = \$19 [8:0];
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \timer$next  = 9'h1b2;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$6 ) begin end
    \fsm_state$next  = fsm_state;
    (* full_case = 32'd1 *)
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:204" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:205" */
      /* \amaranth.decoding  = "IDLE/0" */
      1'h0:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:207" *)
          casez (ack)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:207" */
            1'h1:
                \fsm_state$next  = 1'h1;
          endcase
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:218" */
      /* \amaranth.decoding  = "BUSY/1" */
      1'h1:
          (* full_case = 32'd1 *)
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *)
          casez (\$21 )
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" */
            1'h1:
                /* empty */;
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:221" */
            default:
                (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:227" *)
                casez (\$23 )
                  /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:227" */
                  1'h1:
                      \fsm_state$next  = 1'h0;
                endcase
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \fsm_state$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$6 ) begin end
    \shreg__start$next  = shreg__start;
    \shreg__data$next  = shreg__data;
    \shreg__stop$next  = shreg__stop;
    \o$next  = o;
    (* full_case = 32'd1 *)
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:204" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:205" */
      /* \amaranth.decoding  = "IDLE/0" */
      1'h0:
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:207" *)
          casez (ack)
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:207" */
            1'h1:
              begin
                \shreg__start$next  = 1'h0;
                \shreg__data$next  = data;
                \shreg__stop$next  = 1'h1;
              end
          endcase
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:218" */
      /* \amaranth.decoding  = "BUSY/1" */
      1'h1:
          (* full_case = 32'd1 *)
          (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" *)
          casez (\$1 )
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:219" */
            1'h1:
                /* empty */;
            /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:221" */
            default:
                { \shreg__stop$next , \shreg__data$next , \shreg__start$next , \o$next  } = \$3 ;
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
        begin
          \shreg__start$next  = 1'h0;
          \shreg__data$next  = 8'h00;
          \shreg__stop$next  = 1'h0;
          \o$next  = 1'h1;
        end
    endcase
  end
  assign \$7  = \$8 ;
  assign \$10  = \$11 ;
  assign \$15  = \$16 ;
  assign \$18  = \$19 ;
endmodule

(* \amaranth.hierarchy  = "top.soc.uart_WB_bridge" *)
(* generator = "Amaranth" *)
module uart_WB_bridge(bus__dat_w, bus__dat_r, bus__sel, bus__cyc, bus__stb, bus__we, bus__ack, rst, clk, i, o, bus__adr);
  reg \$auto$verilog_backend.cc:2083:dump_module$7  = 0;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:139" *)
  wire [2:0] \$10 ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:139" *)
  wire [2:0] \$11 ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:72" *)
  wire \$13 ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:89" *)
  wire \$15 ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:142" *)
  wire \$17 ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:69" *)
  wire [2:0] \$4 ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:69" *)
  wire [2:0] \$5 ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:87" *)
  wire [2:0] \$7 ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:87" *)
  wire [2:0] \$8 ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:30" *)
  reg [31:0] address = 32'd0;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:30" *)
  reg [31:0] \address$next ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  input bus__ack;
  wire bus__ack;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  output [31:0] bus__adr;
  wire [31:0] bus__adr;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  output bus__cyc;
  reg bus__cyc;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  input [31:0] bus__dat_r;
  wire [31:0] bus__dat_r;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  output [31:0] bus__dat_w;
  wire [31:0] bus__dat_w;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  output [3:0] bus__sel;
  reg [3:0] bus__sel;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  output bus__stb;
  reg bus__stb;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:14" *)
  output bus__we;
  reg bus__we;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:32" *)
  reg [1:0] bytes_count = 2'h0;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:32" *)
  reg [1:0] \bytes_count$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input clk;
  wire clk;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:28" *)
  reg [7:0] cmd = 8'h00;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:28" *)
  reg [7:0] \cmd$next ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:31" *)
  reg [31:0] data = 32'd0;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:31" *)
  reg [31:0] \data$next ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
  reg [2:0] fsm_state = 3'h0;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
  reg [2:0] \fsm_state$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:98" *)
  input i;
  wire i;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:29" *)
  reg [7:0] length = 8'h00;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:29" *)
  reg [7:0] \length$next ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:190" *)
  output o;
  wire o;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/ir.py:532" *)
  input rst;
  wire rst;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:96" *)
  reg serial_ack;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:188" *)
  reg \serial_ack$1 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:89" *)
  wire [7:0] serial_data;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:186" *)
  reg [7:0] \serial_data$2 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:95" *)
  wire serial_rdy;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_stdio/serial.py:187" *)
  wire \serial_rdy$3 ;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:33" *)
  reg [7:0] words_count = 8'h00;
  (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:33" *)
  reg [7:0] \words_count$next ;
  assign \$11  = bytes_count - (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:139" *) 1'h1;
  assign \$13  = ! (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:72" *) bytes_count;
  assign \$15  = ! (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:89" *) bytes_count;
  assign \$17  = ! (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:142" *) bytes_count;
  always @(posedge clk)
    bytes_count <= \bytes_count$next ;
  always @(posedge clk)
    words_count <= \words_count$next ;
  always @(posedge clk)
    cmd <= \cmd$next ;
  always @(posedge clk)
    fsm_state <= \fsm_state$next ;
  always @(posedge clk)
    length <= \length$next ;
  always @(posedge clk)
    address <= \address$next ;
  always @(posedge clk)
    data <= \data$next ;
  assign \$5  = bytes_count - (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:69" *) 1'h1;
  assign \$8  = bytes_count - (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:87" *) 1'h1;
  serial serial (
    .ack(serial_ack),
    .\ack$1 (\serial_ack$1 ),
    .clk(clk),
    .data(serial_data),
    .\data$2 (\serial_data$2 ),
    .i(i),
    .o(o),
    .rdy(serial_rdy),
    .\rdy$3 (\serial_rdy$3 ),
    .rst(rst)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    bus__stb = 1'h0;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:62" */
      /* \amaranth.decoding  = "Receive-Address/2" */
      3'h2:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:81" */
      /* \amaranth.decoding  = "Handle-Write/3" */
      3'h3:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:92" */
      /* \amaranth.decoding  = "Write-Data/5" */
      3'h5:
          bus__stb = 1'h1;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:105" */
      /* \amaranth.decoding  = "Handle-Read/4" */
      3'h4:
          bus__stb = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    bus__we = 1'h0;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:62" */
      /* \amaranth.decoding  = "Receive-Address/2" */
      3'h2:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:81" */
      /* \amaranth.decoding  = "Handle-Write/3" */
      3'h3:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:92" */
      /* \amaranth.decoding  = "Write-Data/5" */
      3'h5:
          bus__we = 1'h1;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:105" */
      /* \amaranth.decoding  = "Handle-Read/4" */
      3'h4:
          bus__we = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    bus__cyc = 1'h0;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:62" */
      /* \amaranth.decoding  = "Receive-Address/2" */
      3'h2:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:81" */
      /* \amaranth.decoding  = "Handle-Write/3" */
      3'h3:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:92" */
      /* \amaranth.decoding  = "Write-Data/5" */
      3'h5:
          bus__cyc = 1'h1;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:105" */
      /* \amaranth.decoding  = "Handle-Read/4" */
      3'h4:
          bus__cyc = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    bus__sel = 4'h0;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:62" */
      /* \amaranth.decoding  = "Receive-Address/2" */
      3'h2:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:81" */
      /* \amaranth.decoding  = "Handle-Write/3" */
      3'h3:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:92" */
      /* \amaranth.decoding  = "Write-Data/5" */
      3'h5:
          bus__sel = 4'hf;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:105" */
      /* \amaranth.decoding  = "Handle-Read/4" */
      3'h4:
          bus__sel = 4'hf;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    \serial_ack$1  = 1'h0;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:62" */
      /* \amaranth.decoding  = "Receive-Address/2" */
      3'h2:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:81" */
      /* \amaranth.decoding  = "Handle-Write/3" */
      3'h3:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:92" */
      /* \amaranth.decoding  = "Write-Data/5" */
      3'h5:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:105" */
      /* \amaranth.decoding  = "Handle-Read/4" */
      3'h4:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:124" */
      /* \amaranth.decoding  = "Send-Data/6" */
      3'h6:
          \serial_ack$1  = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    \serial_data$2  = 8'h00;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:62" */
      /* \amaranth.decoding  = "Receive-Address/2" */
      3'h2:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:81" */
      /* \amaranth.decoding  = "Handle-Write/3" */
      3'h3:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:92" */
      /* \amaranth.decoding  = "Write-Data/5" */
      3'h5:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:105" */
      /* \amaranth.decoding  = "Handle-Read/4" */
      3'h4:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:124" */
      /* \amaranth.decoding  = "Send-Data/6" */
      3'h6:
          (* full_case = 32'd1 *)
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:127" *)
          casez (bytes_count)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:129" */
            2'h0:
                \serial_data$2  = data[7:0];
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:129" */
            2'h1:
                \serial_data$2  = data[15:8];
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:129" */
            2'h2:
                \serial_data$2  = data[23:16];
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:129" */
            2'h3:
                \serial_data$2  = data[31:24];
          endcase
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    serial_ack = 1'h0;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          serial_ack = 1'h1;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          serial_ack = 1'h1;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:62" */
      /* \amaranth.decoding  = "Receive-Address/2" */
      3'h2:
          serial_ack = 1'h1;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:81" */
      /* \amaranth.decoding  = "Handle-Write/3" */
      3'h3:
          serial_ack = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    \bytes_count$next  = bytes_count;
    (* full_case = 32'd1 *)
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          \bytes_count$next  = 2'h3;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:62" */
      /* \amaranth.decoding  = "Receive-Address/2" */
      3'h2:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:65" *)
          casez (serial_rdy)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:65" */
            1'h1:
                \bytes_count$next  = \$5 [1:0];
          endcase
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:81" */
      /* \amaranth.decoding  = "Handle-Write/3" */
      3'h3:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:83" *)
          casez (serial_rdy)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:83" */
            1'h1:
                \bytes_count$next  = \$8 [1:0];
          endcase
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:92" */
      /* \amaranth.decoding  = "Write-Data/5" */
      3'h5:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:105" */
      /* \amaranth.decoding  = "Handle-Read/4" */
      3'h4:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:115" *)
          casez (bus__ack)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:115" */
            1'h1:
                \bytes_count$next  = 2'h3;
          endcase
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:124" */
      /* \amaranth.decoding  = "Send-Data/6" */
      3'h6:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:135" */
      /* \amaranth.decoding  = "Send-Data-Wait/7" */
      3'h7:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:137" *)
          casez (\serial_rdy$3 )
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:137" */
            1'h1:
                \bytes_count$next  = \$11 [1:0];
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \bytes_count$next  = 2'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    \words_count$next  = words_count;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          \words_count$next  = 8'h00;
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \words_count$next  = 8'h00;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    \cmd$next  = cmd;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:51" *)
          casez (serial_rdy)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:51" */
            1'h1:
                \cmd$next  = serial_data;
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \cmd$next  = 8'h00;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    \fsm_state$next  = fsm_state;
    (* full_case = 32'd1 *)
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:51" *)
          casez (serial_rdy)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:51" */
            1'h1:
                \fsm_state$next  = 3'h1;
          endcase
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:58" *)
          casez (serial_rdy)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:58" */
            1'h1:
                \fsm_state$next  = 3'h2;
          endcase
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:62" */
      /* \amaranth.decoding  = "Receive-Address/2" */
      3'h2:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:65" *)
          casez (serial_rdy)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:65" */
            1'h1:
                (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:72" *)
                casez (\$13 )
                  /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:72" */
                  1'h1:
                      (* full_case = 32'd1 *)
                      (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:73" *)
                      casez (cmd)
                        /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:74" */
                        8'h01:
                            \fsm_state$next  = 3'h3;
                        /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:76" */
                        8'h02:
                            \fsm_state$next  = 3'h4;
                        /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:78" */
                        default:
                            \fsm_state$next  = 3'h0;
                      endcase
                endcase
          endcase
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:81" */
      /* \amaranth.decoding  = "Handle-Write/3" */
      3'h3:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:83" *)
          casez (serial_rdy)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:83" */
            1'h1:
                (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:89" *)
                casez (\$15 )
                  /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:89" */
                  1'h1:
                      \fsm_state$next  = 3'h5;
                endcase
          endcase
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:92" */
      /* \amaranth.decoding  = "Write-Data/5" */
      3'h5:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:101" *)
          casez (bus__ack)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:101" */
            1'h1:
                \fsm_state$next  = 3'h0;
          endcase
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:105" */
      /* \amaranth.decoding  = "Handle-Read/4" */
      3'h4:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:115" *)
          casez (bus__ack)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:115" */
            1'h1:
                \fsm_state$next  = 3'h6;
          endcase
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:124" */
      /* \amaranth.decoding  = "Send-Data/6" */
      3'h6:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:132" *)
          casez (\serial_rdy$3 )
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:132" */
            1'h1:
                \fsm_state$next  = 3'h7;
          endcase
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:135" */
      /* \amaranth.decoding  = "Send-Data-Wait/7" */
      3'h7:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:137" *)
          casez (\serial_rdy$3 )
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:137" */
            1'h1:
                (* full_case = 32'd1 *)
                (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:142" *)
                casez (\$17 )
                  /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:142" */
                  1'h1:
                      \fsm_state$next  = 3'h0;
                  /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:144" */
                  default:
                      \fsm_state$next  = 3'h6;
                endcase
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \fsm_state$next  = 3'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    \length$next  = length;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:58" *)
          casez (serial_rdy)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:58" */
            1'h1:
                \length$next  = serial_data;
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \length$next  = 8'h00;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    \address$next  = address;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:62" */
      /* \amaranth.decoding  = "Receive-Address/2" */
      3'h2:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:65" *)
          casez (serial_rdy)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:65" */
            1'h1:
                \address$next  = { address[23:0], serial_data };
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \address$next  = 32'd0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$7 ) begin end
    \data$next  = data;
    (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:40" *)
    casez (fsm_state)
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:41" */
      /* \amaranth.decoding  = "Receive-Cmd/0" */
      3'h0:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:55" */
      /* \amaranth.decoding  = "Receive-Length/1" */
      3'h1:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:62" */
      /* \amaranth.decoding  = "Receive-Address/2" */
      3'h2:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:81" */
      /* \amaranth.decoding  = "Handle-Write/3" */
      3'h3:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:83" *)
          casez (serial_rdy)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:83" */
            1'h1:
                \data$next  = { data[23:0], serial_data };
          endcase
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:92" */
      /* \amaranth.decoding  = "Write-Data/5" */
      3'h5:
          /* empty */;
      /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:105" */
      /* \amaranth.decoding  = "Handle-Read/4" */
      3'h4:
          (* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:115" *)
          casez (bus__ack)
            /* src = "/home/vdb/repos/hw/uart_spi_soc/uart_spi_soc/uart_bridge.py:115" */
            1'h1:
                \data$next  = bus__dat_r;
          endcase
    endcase
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth/hdl/xfrm.py:504" *)
    casez (rst)
      1'h1:
          \data$next  = 32'd0;
    endcase
  end
  assign \$4  = \$5 ;
  assign \$7  = \$8 ;
  assign \$10  = \$11 ;
  assign bus__adr = address;
  assign bus__dat_w = data;
endmodule

(* \amaranth.hierarchy  = "top.soc.led4.peri_bridge.wb_decoder" *)
(* generator = "Amaranth" *)
module wb_decoder(_bus__dat_w, _bus__sel, _bus__we, _bus__stb, _bus__cyc, _bus__dat_r, _bus__ack, wb__adr, wb__cyc, wb__stb, wb__sel, wb__we, wb__dat_w, wb__dat_r, wb__ack, _bus__adr);
  reg \$auto$verilog_backend.cc:2083:dump_module$8  = 0;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:285" *)
  wire [1:0] \$1 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:285" *)
  wire [1:0] \$2 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:304" *)
  wire \$4 ;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output _bus__ack;
  wire _bus__ack;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__adr;
  wire _bus__adr;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__cyc;
  wire _bus__cyc;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  output [31:0] _bus__dat_r;
  reg [31:0] _bus__dat_r;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input [31:0] _bus__dat_w;
  wire [31:0] _bus__dat_w;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__sel;
  wire _bus__sel;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__stb;
  wire _bus__stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:220" *)
  input _bus__we;
  wire _bus__we;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  input wb__ack;
  wire wb__ack;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  output wb__adr;
  wire wb__adr;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  output wb__cyc;
  reg wb__cyc;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  input [31:0] wb__dat_r;
  wire [31:0] wb__dat_r;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  output [31:0] wb__dat_w;
  wire [31:0] wb__dat_w;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  output wb__sel;
  wire wb__sel;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  output wb__stb;
  wire wb__stb;
  (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/csr/wishbone.py:49" *)
  output wb__we;
  wire wb__we;
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$8 ) begin end
    (* full_case = 32'd1 *)
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:280" *)
    casez (_bus__adr)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:299" */
      1'h?:
          wb__cyc = _bus__cyc;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$8 ) begin end
    (* full_case = 32'd1 *)
    (* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:280" *)
    casez (_bus__adr)
      /* src = "/home/vdb/repos/hw/venv3p10/lib/python3.10/site-packages/amaranth_soc/wishbone/bus.py:299" */
      1'h?:
          _bus__dat_r = wb__dat_r;
    endcase
  end
  assign \$1  = \$2 ;
  assign _bus__ack = \$4 ;
  assign wb__stb = _bus__stb;
  assign wb__we = _bus__we;
  assign wb__sel = _bus__sel;
  assign wb__dat_w = _bus__dat_w;
  assign wb__adr = \$2 [0];
  assign \$2  = { 1'h0, _bus__adr };
  assign \$4  = wb__ack;
endmodule
